---
title: 编程语言通识与JavaScript语言设计
tags:
- 工程化
- 前端
- JavaScript
- 语言设计
categories: 前端
abbrlink: 8868e6e9
---
# 编程语言通识与JavaScript语言设计

## 语言按语法分类

### 非形式语言

- 中文，英文...

### 形式语言（乔姆斯基谱系）

- 0型 无限制文法

  ?::=?

- 1型 上下文相关文法

  ?<A>?::=?<B>?

- 2型 上下文无关文法

  <A>::=?

- 3型 正则文法

  <A>::=<A>?

| 文法 |      语言      |        自动机        |       产生式规则       |
| :--: | :------------: | :------------------: | :--------------------: |
| 0-型 | 递归可枚举语言 |        图灵机        |    α -> β（无限制）    |
| 1-型 | 上下文相关语言 | 线性有界非确定图灵机 |      α*A*β -> αγβ      |
| 2-型 | 上下文无关语言 |   非确定下推自动机   |        *A* -> γ        |
| 3-型 |    正则语言    |    有限状态自动机    | *A* -> *aB* *A* -> *a* |

## 文法

### 文法的概念

在形式语言理论中，**文法**（为了避免歧义，常称作“形式文法”）是形式语言中字符串的一套产生式规则。这些规则描述了如何用语言的字母表生成符合语法的有效的字符串。文法不描述字符串的含义，也不描述在任何上下文中可以用它们做什么——只描述它们的形式。

### BNF范式

BNF(Backus-Naur Form)是描述**编程语言的文法**。巴科斯范式是一种用于表示上下文无关文法的语言，上下文无关文法描述了一类形式语言。

BNF规定是推导规则(产生式)的集合，写为：

```
符号 ::= <使用符号的表达式>
```

这里的 `<符号>` 是非终结符，而表达式由一个符号序列，或用指示选择的竖杠 `'|'` 分隔的多个符号序列构成，每个符号序列整体都是左端的符号的一种可能的替代。从未在左端出现的符号叫做终结符。

## 终结符和非终结符

**终结符**：终结符是一个形式语言的基本符号。就是说，它们能在一个形式语法的推导规则的输入或输出字符串存在，而且他们不能被分解为更小的单位。确切的说，一个语法的规则不能改变终结符。一个形式语法所推导的形式语言必须完全由终结符组成。

**非终结符**：非终结符是可以被取代的符号。一个形式文法中必须有一个起始符号，这个起始符号属于非终结符的集合。在上下文无关文法中，每个推导规则的左边只能有一个非终结符而不能有两个以上的非终结符或终结符。（并非所有的语言都可以被上下文无关文法产生）

## BNF范式的语法

在BNF中，双引号中的字(“word”)代表着这些字符本身。而double_quote用来代表双引号。

在双引号外的字（有可能有下划线）代表着语法部分。

```
< >     : 内包含的为必选项。
[ ]     : 内包含的为可选项。
{ }     : 内包含的为可重复0至无数次的项。
|       : 表示在其左右两边任选一项，相当于"OR"的意思。
::=     : 是“被定义为”的意思
"..."   : 术语符号
[...]   : 选项，最多出现一次
{...}   : 重复项，任意次数，包括 0 次
(...)   : 分组
|       : 并列选项，只能选一个
```

例如，Java语言总的`for`语句的BNF范式定义如下：

```
FOR_STATEMENT ::=
    "for" "(" ( variable_declaration |
    ( expression ";" ) | ";" )
    [ expression ] ";"
    [ expression ]
    ")" statement
```

## ABBF

RFC2234 定义了扩展的巴科斯范式(ABNF)。近年来在Internet的定义中 ABNF 被广泛使用。扩充巴科斯-诺尔范式(ABNF)基于了巴科斯-诺尔范式(BNF)，但由它自己的语法和推导规则构成。这种元语言的发起原则是描述作为通信协议(双向规范)的语言的形式系统。

ABNF 规定是一组推导规则，写为：

```
规则 = 定义 ; 注释 CR LF
```

这里的规则是大小写敏感的非终止符，定义由定义这个规则的符号序列，一个文档注释组成，并结束于回车换行。

规则名字是大小写不敏感的: `<rulename>`, `<Rulename>`, `<RULENAME>` 和 `<rUlENamE>` 都提及同一个规则。规则名字由开始于一个字母的字母、数字和连字符组成。不要求用尖括号(“`<`”, “`>`”) (如 BNF 那样)包围规则名字。但是它们可以用来界定规则名字，比如在冗文中识别出规则名字的时候。ABNF 使用 7-位 ASCII 编码，在 8-位域中把高位置零。

终结符由一个或多个数值字符指定。数值字符可以指定为跟随着基数(b = 二进制, d = 十进制, x = 十六进制)的一个百分号“%”，随后是这个数值，或数值的串联(用“.” 来指示)。例如回车可以指定为十进制的 %d13 或十六进制的 %x0D。回车换行可以指定为 %d13.10。

文字正文通过使用包围在引号(“)中字符串来指定。这些字符串是大小写不敏感的，使用的字符集是 US-ASCII。所以字符串“abc”将匹配“abc”, “Abc”, “aBc”, “abC”, “ABc”, “AbC”, “aBC” 和 “ABC”。对于大小写敏感匹配，必须定义明确的字符: 要匹配 “aBc” 定义将是 %d97 %d66 %d99。

#### 用括号括起来的名称来表示语法结构名

#### 语法结构分成基础结构和需要用其他语法结构定义的复合结构

- 基础结构称终结符
- 复合结构称非终结符

#### 引号和中间的字符表示终结符

#### 可以有括号

#### *表示重复多次

#### |表示或

#### +表示至少一次

#### 四则运算：

- 1+2*3

#### 终结符:

- Number
- +-*/

#### 非终结符：

- MultiplicativeExpression
- AddtiveExpression

## 现代语言的特例

- C++中，*可以表示乘号或者指针，具体是哪个，取决于星号前面 的标识符是否被声明为类型
- VB中，<可能是小于号，也可能是XML直接量的开始，取决于当前位置是否可以接受XML直接量
- Python中，行首的tab和空格会根据上一行的行首空白以一定规则被处理成虚拟终结符indent或者dedent
- Javascript中，/可能是除号，也可能是正则表达式开头，处理方式类似于VB，字符串模板中也需要特殊处理，还有自动插入分号规则

## 图灵完备性

### 图灵机

又称确定型图灵机，其更抽象的意义为一种[计算模型](https://zh.wikipedia.org/wiki/计算模型)，可以看作等价于任何有限逻辑数学过程的终极强大逻辑机器。

### 图灵完备性

在[可计算性理论](https://zh.wikipedia.org/wiki/可计算性理论)，如果一系列操作数据的规则（如[指令集](https://zh.wikipedia.org/wiki/指令集)、[编程语言](https://zh.wikipedia.org/wiki/编程语言)、[细胞自动机](https://zh.wikipedia.org/wiki/細胞自動機)）可以用来模拟任何[图灵机](https://zh.wikipedia.org/wiki/图灵机)，那么它是**图灵完备**的。这意味着这个系统也可以识别其他数据处理规则集，图灵完备性被用作表达这种数据处理规则集的一种属性。

**命令式---图灵机**

- goto
- if 和while

**声明式---lambda**

- 递归

## 动态与静态

### 动态

- 在用户的设备/在线服务器上
- 产品实际运行时
- Runtime

### 静态

- 在程序员的设备上
- 产品开始时
- Compiletime

## 类型系统

### 动态类型系统与静态类型系统

### 强类型与弱类型

- String + Number
- String == Boolean

### 复合类型

- 结构体
- 函数签名

### 子类型

- 逆变/协变

## 一般命令式编程语言

### Atom

- Identifier
- Literal

### Expression

- Atom
- Operator
- Punctuator

### Statement

- Expression
- Keyword
- Punctuator

### Structure

- Function
- Class
- Process
- NameSpace
- ...

### Program

- Program
- Module
- Package
- Library

```
docker run -p 3306:3306 --name mysql \
-v /mydata/mysql/log:/var/log/mysql \
-v /mydata/mysql/data:/var/lib/mysql \
-v /mydata/mysql/conf:/etc/mysql \
-e MYSQL_ROOT_PASSWORD=root  \
-d mysql:5.7

```

